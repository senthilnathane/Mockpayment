<form id="payment-form">
    <div id="card-element">
        <!-- A Stripe Element will be inserted here. -->
    </div>

    <!-- Used to display form errors. -->
    <div id="card-errors" role="alert"></div>

    <button id="submit">Pay</button>
</form>

<script>
    // Set your publishable key here (from Stripe dashboard)
    const stripe = Stripe('pk_test_yourPublishableKeyHere');
    const elements = stripe.elements();

    // Create an instance of the card Element.
    const card = elements.create('card');

    // Add an instance of the card Element into the card-element div.
    card.mount('#card-element');

    // Handle form submission
    const form = document.getElementById('payment-form');
    form.addEventListener('submit', async (event) => {
        event.preventDefault();

        // Call your server to create a payment intent
        const response = await fetch('/create-payment-intent', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ amount: 5000 }) // Example amount: $50.00
        });
        const { clientSecret } = await response.json();

        // Confirm the payment with Stripe
        const { error, paymentIntent } = await stripe.confirmCardPayment(clientSecret, {
            payment_method: {
                card: card,
            }
        });

        if (error) {
            // Handle error
            const errorElement = document.getElementById('card-errors');
            errorElement.textContent = error.message;
        } else if (paymentIntent.status === 'succeeded') {
            // Payment succeeded
            alert('Payment Successful!');
        }
    });
</script>
